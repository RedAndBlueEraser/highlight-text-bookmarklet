(()=>{const t=e=>{switch(e.nodeType){case Node.TEXT_NODE:return[e];case Node.ELEMENT_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return Array.prototype.map.call(e.childNodes,e=>t(e)).flat();default:return[]}},e=(t,r=0)=>{switch(t.nodeType){case Node.TEXT_NODE:{if(r<t.length)return t;let o=null;for(;!(o=t.nextSibling)&&(t=t.parentNode););return o?e(o):null}case Node.ELEMENT_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:{const o=t.childNodes,a=o.length;for(let t=r;t<a;t++){const r=e(o[t]);if(r)return r}let i=null;for(;!(i=t.nextSibling)&&(t=t.parentNode););return i?e(i):null}default:{let r=null;for(;!(r=t.nextSibling)&&(t=t.parentNode););return r?e(r):null}}},r=(t,e=t.length||t.childNodes.length)=>{switch(t.nodeType){case Node.TEXT_NODE:{if(e>0&&t.length>0)return t;let o=null;for(;!(o=t.previousSibling)&&(t=t.parentNode););return o?r(o):null}case Node.ELEMENT_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:{const o=t.childNodes;for(let t=e;t-- >0;){const e=r(o[t]);if(e)return e}let a=null;for(;!(a=t.previousSibling)&&(t=t.parentNode););return a?r(a):null}default:{let e=null;for(;!(e=t.previousSibling)&&(t=t.parentNode););return e?r(e):null}}},o=(t,e)=>{const r=document.createElement("formatted-text");return Object.assign(r.style,e),t.parentNode.replaceChild(r,t),r.appendChild(t),r},a=(a,i)=>{(t=>{const o=t.startContainer,a=t.startOffset;switch(o.nodeType){case Node.TEXT_NODE:a>0&&t.setStart(o.splitText(a),0);break;case Node.ELEMENT_NODE:t.setStart(e(o,a),0)}const i=t.endContainer,l=t.endOffset;switch(i.nodeType){case Node.TEXT_NODE:l<i.length&&i.splitText(l);break;case Node.ELEMENT_NODE:const e=r(i,l);t.setEnd(e,e.length)}})(a);const l=a.commonAncestorContainer;switch(l.nodeType){case Node.TEXT_NODE:o(l,i);break;case Node.ELEMENT_NODE:const e=t(l),r=e.lastIndexOf(a.endContainer);for(let t=e.indexOf(a.startContainer);t<=r;t++)o(e[t],i)}},i=(t=window)=>{try{const e=t.getSelection();return e&&e.rangeCount>0?[e,...Array.prototype.flatMap.call(t.frames,t=>i(t))]:Array.prototype.flatMap.call(t.frames,t=>i(t))}catch(t){return console.error(t),[]}},l=t=>{for(const e of i()){const r=e.rangeCount;for(let o=0;o<r;o++)try{a(e.getRangeAt(o),t)}catch(t){console.error(t)}e.removeAllRanges()}};(()=>{const t=document.createElement("iframe");document.body.appendChild(t);const e=t.contentDocument;e.open(),e.write('<!DOCTYPE html><html lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1,shrink-to-fit=no"name=viewport><main><button aria-label=Bold class="text-format-picker-item text-format-picker-item-bold"title=Bold data-text-format-picker-value="font-weight=bold"><span aria-hidden=true>B</span></button> <button aria-label=Italic class="text-format-picker-item text-format-picker-item-italic"title=Italic data-text-format-picker-value="font-style=italic"><span aria-hidden=true>I</span></button> <button aria-label=Underline class="text-format-picker-item text-format-picker-item-underline"title=Underline data-text-format-picker-value="text-decoration=underline"><span aria-hidden=true>U</span></button> <button aria-label=Strikethrough class="text-format-picker-item text-format-picker-item-strikethrough"title=Strikethrough data-text-format-picker-value="text-decoration=line-through"><span aria-hidden=true>ab</span></button> <button aria-label=Black class="text-format-picker-item text-format-picker-item-color text-format-picker-item-color-black"title=Black data-text-format-picker-value="background-color=black"></button> <button aria-label=Gray class="text-format-picker-item text-format-picker-item-color text-format-picker-item-color-gray"title=Gray data-text-format-picker-value="background-color=gray"></button> <button aria-label=Silver class="text-format-picker-item text-format-picker-item-color text-format-picker-item-color-silver"title=Silver data-text-format-picker-value="background-color=silver"></button> <button aria-label=White class="text-format-picker-item text-format-picker-item-color text-format-picker-item-color-white"title=White data-text-format-picker-value="background-color=white"></button> <button aria-label=Maroon class="text-format-picker-item text-format-picker-item-color"title=Maroon data-text-format-picker-value="background-color=maroon"></button> <button aria-label=Red class="text-format-picker-item text-format-picker-item-color"title=Red data-text-format-picker-value="background-color=red"></button> <button aria-label=Orange class="text-format-picker-item text-format-picker-item-color"title=Orange data-text-format-picker-value="background-color=orange"></button> <button aria-label=Yellow class="text-format-picker-item text-format-picker-item-color"title=Yellow data-text-format-picker-value="background-color=yellow"></button> <button aria-label=Lime class="text-format-picker-item text-format-picker-item-color"title=Lime data-text-format-picker-value="background-color=lime"></button> <button aria-label=Aqua class="text-format-picker-item text-format-picker-item-color"title=Aqua data-text-format-picker-value="background-color=aqua"></button> <button aria-label=Blue class="text-format-picker-item text-format-picker-item-color"title=Blue data-text-format-picker-value="background-color=blue"></button> <button aria-label=Navy class="text-format-picker-item text-format-picker-item-color"title=Navy data-text-format-picker-value="background-color=navy"></button> <button aria-label=Purple class="text-format-picker-item text-format-picker-item-color"title=Purple data-text-format-picker-value="background-color=purple"></button> <button aria-label=Fuchsia class="text-format-picker-item text-format-picker-item-color"title=Fuchsia data-text-format-picker-value="background-color=fuchsia"></button> <input aria-label="Color picker"class="text-format-picker-item text-format-picker-item-color-picker"title="Color picker"type=color value=#ffff00> <button aria-label=Cancel class="text-format-picker-item text-format-picker-item-cancel"title=Fuchsia>Cancel</button></main>'),e.close();let r=null;new Promise((e,r)=>{"interactive"===document.readyState||"complete"===document.readyState?e():(t.addEventListener("load",e,{once:!0}),t.addEventListener("error",r,{once:!0}))}).then(()=>new Promise((t,o)=>{const a=e.head.appendChild(e.createElement("style")),i=a.sheet;i&&i.cssRules?(r=i,t()):(a.remove(),o())}).catch(()=>new Promise((t,r)=>{let o=null;for(const t of document.styleSheets)try{if(t.cssRules){o=t.ownerNode;break}}catch(t){console.error(t)}o?((o=o.cloneNode(!0)).addEventListener("load",()=>{t(o)},{once:!0}),o.addEventListener("error",r,{once:!0}),e.head.appendChild(o)):r()}).then(t=>{r=t.sheet}))).then(()=>{for(let t=r.cssRules.length;t-- >0;)r.deleteRule(t);const o=["*{box-sizing:border-box}","html{font-size:12px}",'body{display:inline-block;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;font-size:1rem;line-height:1.5;margin:0;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:100%}',"button,input{font-family:inherit;font-size:inherit;line-height:inherit;margin:0}","button{-webkit-appearance:button;border-radius:0;text-transform:none}","button:focus:not(:focus-visible){outline:0}","::-moz-focus-inner{border-style:none;padding:0}","main{background:padding-box #fff;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;color:#212529;display:inline-grid;gap:.5rem 2px;grid:[font-style grayscale] 2rem [color] 2rem [cancel] 2rem/repeat(12,2rem);padding:.5rem}","@media (prefers-color-scheme:dark){main{background-color:#343a40;color:#dee2e6}}",".text-format-picker-item{background-color:#fff;border:1px solid #dee2e6;border-radius:1px;padding:0;position:relative;text-align:center;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;vertical-align:middle}","@media (prefers-reduced-motion:reduce){.text-format-picker-item{transition:none}}",".text-format-picker-item:focus{border-color:#ffc107;box-shadow:0 0 0 .25rem rgba(255,193,7,.5);outline:0;z-index:1}",".text-format-picker-item:hover{border-color:#ffc107}",'.text-format-picker-item-bold,.text-format-picker-item-italic,.text-format-picker-item-strikethrough,.text-format-picker-item-underline{font-family:Verdana,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;grid-row-start:font-style}',".text-format-picker-item-bold,.text-format-picker-item-italic,.text-format-picker-item-underline{font-size:1.166667rem}",".text-format-picker-item-bold{font-weight:700}",".text-format-picker-item-italic{font-style:italic}",".text-format-picker-item-underline{text-decoration:underline}",".text-format-picker-item-strikethrough{text-decoration:line-through}",".text-format-picker-item-color{grid-row:color}",".text-format-picker-item-color-black,.text-format-picker-item-color-gray,.text-format-picker-item-color-silver,.text-format-picker-item-color-white{grid-row:grayscale}",".text-format-picker-item-color-black{grid-column:6}",".text-format-picker-item-color-gray{grid-column:7}",".text-format-picker-item-color-silver{grid-column:8}",".text-format-picker-item-color-white{grid-column:9}",".text-format-picker-item-color-picker{grid-area:color/auto/auto/span 2;height:100%;padding:.25rem .5rem;width:100%}",".text-format-picker-item-color-picker::-moz-color-swatch{border-radius:1px}",".text-format-picker-item-color-picker::-webkit-color-swatch{border-radius:1px}",".text-format-picker-item-color-picker::-webkit-color-swatch-wrapper{padding:0}",".text-format-picker-item-cancel{color:#212529;grid-area:cancel/auto/auto/span 12}"];for(const t of o.reverse())try{r.insertRule(t)}catch(t){console.error(t)}const{offsetHeight:a,offsetWidth:i}=e.body,c=t.style;c.border="0",c.height=a+"px",c.opacity="1",c.position="fixed";const n=matchMedia("(prefers-reduced-motion: reduce)").matches;let s;c.transition=n?"none":"opacity 500ms",c.width=i+"px",c.zIndex="9999";try{s=getSelection().getRangeAt(0).getBoundingClientRect()}catch(t){console.error(t),s={bottom:0,left:0,right:0,top:0}}c.left=s.right+"px",c.top=s.bottom+"px";let m=t.getBoundingClientRect();m.bottom>window.innerHeight&&(c.top=s.top-a+"px"),m.right>window.innerWidth&&(c.left=s.left-i+"px"),((m=t.getBoundingClientRect()).left<0||m.top<0)&&(c.left=c.top="0px");let d=setTimeout(n?()=>{t.remove()}:()=>{c.opacity="0",setTimeout(()=>{t.remove()},500)},1e4);document.addEventListener("scroll",()=>{t.remove()},{once:!0}),document.addEventListener("selectionchange",()=>{t.remove()},{once:!0});for(const r of e.getElementsByClassName("text-format-picker-item-color")){const e={};for(const t of r.getAttribute("data-text-format-picker-value").trim().split(/\s*&\s*/g)){const{0:r,1:o}=t.split(/\s*=\s*/g);e[r]=o}r.style.backgroundColor=e["background-color"],r.addEventListener("click",()=>{l(e),t.remove()},{once:!0})}for(const r of e.querySelectorAll(".text-format-picker-item-bold, .text-format-picker-item-italic, .text-format-picker-item-underline, .text-format-picker-item-strikethrough")){const e={};for(const t of r.getAttribute("data-text-format-picker-value").trim().split(/\s*&\s*/g)){const{0:r,1:o}=t.split(/\s*=\s*/g);e[r]=o}r.addEventListener("click",()=>{l(e),t.remove()},{once:!0})}const p=e.getElementsByClassName("text-format-picker-item-color-picker")[0];return p.addEventListener("click",()=>{clearTimeout(d)},{once:!0}),p.addEventListener("change",()=>{l({backgroundColor:p.value}),t.remove()},{once:!0}),e.getElementsByClassName("text-format-picker-item-cancel")[0].addEventListener("click",()=>{t.remove()},{once:!0}),t.focus(),t},()=>{t.remove(),l({backgroundColor:"yellow"})})})()})();